# Highlight Keeper

一個以 Manifest V3 建立的 Chrome 擴充功能，可在任何網頁標註文字、挑選顏色，並把標註資訊（包含原始網址、標註內容與位置）安全儲存在瀏覽器的本機空間。重新開啟網頁時，標註會自動復原。

## 功能特色

- 在任意網頁選取文字後，一鍵加上高亮標註。
- 從內建顏色或自訂色碼中挑選標註顏色。
- 透過 `chrome.storage.local` 把標註資訊存於本機，無需任何遠端服務。
- 自動記錄原始網址、標註文字內容以及 DOM 位置，重新載入後仍會顯示。
- 選取文字時會浮出快捷按鈕，直接點擊即可套用最近使用的顏色。
- 點擊既有標註即可開啟設定面板，支援改變顏色、刪除標註與新增/編輯註解（同樣儲存在本機）。
- Popup 色票支援自訂新增、刪除與編輯，動態同步到頁面上的標註選單。
- 可於頁面開啟側邊面板集中查看標註、快速定位原文位置，並可切換左/右側與跨頁瀏覽。
- 支援為每個頁面設定多個標籤，並在側邊面板以標籤或關鍵字搜尋，快速找到需要的內容。
- 側邊面板可直接複製或下載目前篩選結果的標註文字（純文字，每段換行）。
- 內建 AI 筆記工具，可在頁面側邊面板設定 OpenAI 或 Gemini API Key、自訂 Prompt，並自動整理標註重點成淺顯易懂的筆記。

## 專案結構

- `manifest.json`：擴充功能設定（Manifest V3）
- `popup.html` / `popup.css` / `popup.js`：彈出視窗 UI 與互動邏輯
- `contentScript.js`：處理頁面上的選取文字、建立標註、儲存與還原
- `contentStyles.css`：標註樣式

## 安裝方式

1. 執行 `npm install` 不是必要步驟，本專案不依賴套件管理。
2. 打開 Chrome → `chrome://extensions/`
3. 右上角開啟「開發人員模式」。
4. 點選「載入未封裝項目」，選擇此資料夾。

## 使用說明

1. 在目標網頁選取要標註的文字。
2. 若想變更顏色，可點擊工具列上的「Highlight Keeper」圖示，在色票中挑選或新增/編輯顏色；新增的色票會同步至頁面設定面板。
3. 選取完文字後，直接點擊浮動的 `HL` 按鈕即可立即標註。
4. 點擊「在頁面開啟面板」可顯示側邊標註面板，並可在 popup 切換左右位置；面板中的下拉選單支援查看其他頁面，並能直接開啟對應頁面或捲動到本頁標註。於面板「頁面標籤」欄位可輸入或自動完成既有標籤，新增/移除特定來源的標籤，亦可使用關鍵字搜尋快速縮小結果；可直接複製或下載目前列表的標註純文字。
5. 需要 AI 筆記時，開啟頁面側邊面板切換到「AI 筆記」分頁，填入 API Key、選擇服務與模型、撰寫（或沿用預設）Prompt 後按下「產生筆記」；系統會自動將全文與標註送給模型並回傳整理後的筆記，結果會保留在面板並可一鍵複製。
6. 點擊已標註的文字會跳出設定面板，可調整顏色、刪除標註或編輯註解。
7. 重新整理或重新打開同一頁面時，標註與註解會自動回復。

> 小提醒：目前不支援在可編輯欄位（例如輸入框、WYSIWYG 編輯器）內建立標註。

## 後續延伸想法

- 提供標註列表/搜尋介面，快速跳轉到指定標註。
- 支援多台裝置同步（例如搭配雲端儲存）。
- 針對動態頁面（SPA）增加偵測與復原策略。
