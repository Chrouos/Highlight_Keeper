# Highlight Keeper

一個以 Manifest V3 建立的 Chrome 擴充功能，可在任何網頁標註文字、挑選顏色，並把標註資訊（包含原始網址、標註內容與位置）安全儲存在瀏覽器的本機空間。重新開啟網頁時，標註會自動復原。

## 功能特色

- 在任意網頁選取文字後，一鍵加上高亮標註。
- 從內建顏色或自訂色碼中挑選標註顏色，Popup 色票支援新增/刪除/覆寫並即時同步到頁面面板。
- 透過 `chrome.storage.local` 把標註資訊存於本機，無需任何遠端服務，重新開啟網頁會自動復原。
- 選取文字時會浮出快捷按鈕，直接點擊即可套用最近使用的顏色。
- 點擊既有標註即可開啟設定面板，支援改變顏色、刪除標註與新增/編輯註解。
- 側邊面板改採 **標註 / 存檔 / 搜尋 / AI 筆記** 四分頁：
  - **標註**：查看本頁標註、複製/下載/匯入 JSON、編輯頁面標籤。
  - **存檔**：分為「本頁」與「全部筆記」兩組按鈕，可下載整份備份或將多個 JSON 一次匯入（已存在的頁面會自動跳過）。
  - **搜尋**：可輸入關鍵字/標籤並以下拉選單鎖定特定網址，快速瀏覽跨頁筆記。
  - **AI 筆記**：設定 OpenAI / Gemini API Key、模型與 Prompt，並以頁面全文＋標註產生概要筆記。
- 搜尋結果卡片會顯示頁面標題、網址、時間與刪除按鈕，點擊即可開啟原頁或定位到標註。
- 新增 **「筆記內容總覽」**（`manager.html`）：集中列出全部頁面、支援關鍵字/標題搜尋、一次匯出/匯入多個 JSON，適合長期備份管理。
- 擴充套件圖示改為 `Icon/` 目錄底下的多尺寸 PNG（16/32/48/128px），確保 Chrome 各處載入時都能對應到正確尺寸。

> 目前標註只針對靜態文字節點，尚未支援在可編輯欄位（Input / WYSIWYG）內建立標註。

## 專案結構

- `manifest.json`：擴充功能設定（Manifest V3）
- `popup.html`, `popup.css`, `popup.js`：彈出視窗（設定色票、開啟面板、連到筆記總覽）。
- `contentScript.js`, `contentStyles.css`：處理頁面標註、側邊面板、搜尋、存檔與 AI 筆記。
- `manager.html`, `manager.css`, `manager.js`：筆記內容總覽頁，支援全域搜尋與批次匯出/匯入。
- `Icon/`：存放 16/32/48/128px 的多尺寸圖示，`manifest.json` 與頁面浮動按鈕會根據需求載入不同大小。

## 使用說明

1. 在目標網頁選取文字後，點擊浮動 `HL` 按鈕即可標註；若需更換顏色，可先在 Popup 內設定色票。
2. **頁面面板**：按下「在頁面開啟面板」後即可於網頁右側看到四個分頁：
   - **標註**：查看本頁所有標註，複製純文字、下載/匯入 JSON，或為頁面新增標籤。
   - **存檔**：
     - 「本頁筆記」：複製當前頁面、下載本頁 JSON、匯入一份 JSON 到本頁。
     - 「全部筆記」：下載全部頁面的備份 JSON，或一次匯入多個 JSON；對已存在標註的頁面會自動跳過以免覆蓋。
   - **搜尋**：輸入關鍵字（會搜尋標題、網址、標註文字、註解與標籤），搭配下拉選單選擇「全部頁面」或特定網址，即時列出結果並可開啟來源。
   - **AI 筆記**：填入 API Key、選擇模型與 Prompt 後按「產生筆記」，系統會以當前頁面的全文＋標註自動整理重點並儲存在本機。
3. **筆記內容總覽**：在 Popup 點「管理所有筆記」開啟 `manager.html`，即可：
   - 搜尋所有頁面的標題、網址、標註內文與註解。
   - 一鍵下載全部筆記 JSON。
   - 匯入多個 JSON（對已有筆記的頁面會自動跳過）。
4. 點擊任一標註可再編輯顏色或註解；滑鼠移到搜尋結果或總覽頁的連結可直接開啟原頁。

## 安裝方式

1. 執行 `npm install` 不是必要步驟，本專案不依賴套件管理。
2. 打開 Chrome → `chrome://extensions/`
3. 右上角開啟「開發人員模式」。
4. 點選「載入未封裝項目」，選擇此資料夾。

## Roadmap（精簡）

詳細條目請參考 `ROADMAP.md`，以下列出目前仍計畫中的方向：

- 提供雲端同步機制，讓多台裝置共享標註。
- 針對動態內容（SPA、虛擬 DOM）設計更穩定的定位策略。
- 允許在輸入框/WYSIWYG 內建立標註。
